<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gi·ªè H√†ng</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" 
  rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

  <link rel="stylesheet" href="giohang.css">
</head>
<body>

<nav class="navbar navbar-expand-lg bg-danger fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img src="logo.png" width="50px" height="50px" alt="">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link text-light" href="index.html">Trang Ch·ªß</a></li>
        <li class="nav-item"><a class="nav-link active text-light" href="giohang.html">Gi·ªè H√†ng</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="dangnhap.html">ƒêƒÉng Nh·∫≠p</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="dangki.html">ƒêƒÉng K√≠</a></li>
        <li class="nav-item"><a class="nav-link text-light" href="lienhe.html">Li√™n H·ªá</a></li>
      </ul>
    </div>
  </div>
</nav>
<main class="container" style="padding-top: 100px;">
  <h1 class="text-center text-danger mb-4">üõí Gi·ªè H√†ng C·ªßa B·∫°n</h1>

  <div class="cart-table">
    <table class="table align-middle text-center">
      <thead class="table-danger">
        <tr>
          <th>S·∫£n ph·∫©m</th>
          <th>Gi√°</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>T·ªïng</th>
          <th>X√≥a</th>
        </tr>
      </thead>
      <tbody id="cart-body">
        <tr>
          <td class="product-name">PC Gaming RTX 4060</td>
          <td class="price" data-price="16280000">16,280,000‚Ç´</td>
          <td><input type="number" class="form-control quantity" value="1" min="1"></td>
          <td class="total">16,280,000‚Ç´</td>
          <td><button class="btn btn-outline-danger btn-sm delete-btn">X√≥a</button></td>
        </tr>
        <tr>
          <td class="product-name">PC Office I5 10400F</td>
          <td class="price" data-price="9990000">9,990,000‚Ç´</td>
          <td><input type="number" class="form-control quantity" value="2" min="1"></td>
          <td class="total">19,980,000‚Ç´</td>
          <td><button class="btn btn-outline-danger btn-sm delete-btn">X√≥a</button></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="cart-summary text-end mt-4">
    <h4>T·ªïng c·ªông: <span id="cart-total" class="text-danger fw-bold">36,260,000‚Ç´</span></h4>
    <button id="checkout-btn" class="btn checkout-btn">Thanh To√°n</button>
  </div>
</main>

<div class="modal fade" id="successModal" tabindex="-1" aria-labelledby="successModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-4">
      <div class="modal-body">
        <h4 class="text-success mb-3"> Thanh To√°n Th√†nh C√¥ng!</h4>
        <p>C·∫£m ∆°n b·∫°n ƒë√£ mua h√†ng</p>
        <button type="button" class="btn btn-success mt-2" data-bs-dismiss="modal">ƒê√≥ng</button>
      </div>
    </div>
  </div>
</div>

<script>
  const cartBody = document.getElementById('cart-body');
  const cartTotal = document.getElementById('cart-total');
  const checkoutBtn = document.getElementById('checkout-btn');

  function formatCurrency(value) {
    return value.toLocaleString('vi-VN') + '‚Ç´';
  }

  function updateTotal() {
    const rows = document.querySelectorAll('#cart-body tr');
    let total = 0;
    rows.forEach(row => {
      const price = parseInt(row.querySelector('.price').dataset.price);
      const qty = parseInt(row.querySelector('.quantity').value);
      const subtotal = price * qty;
      row.querySelector('.total').textContent = formatCurrency(subtotal);
      total += subtotal;
    });
    cartTotal.textContent = formatCurrency(total);
  }

  document.querySelectorAll('.quantity').forEach(input => {
    input.addEventListener('change', updateTotal);
  });

  document.querySelectorAll('.delete-btn').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.target.closest('tr').remove();
      updateTotal();
    });
  });

  // ‚ö° Khi nh·∫•n n√∫t thanh to√°n
  checkoutBtn.addEventListener('click', () => {
    const rows = cartBody.querySelectorAll('tr');
    if (rows.length === 0) {
      alert('Gi·ªè h√†ng tr·ªëng, kh√¥ng th·ªÉ thanh to√°n!');
      return;
    }

    const modal = new bootstrap.Modal(document.getElementById('successModal'));
    modal.show();

    // Tu·ª≥ ch·ªçn: sau khi thanh to√°n, l√†m tr·ªëng gi·ªè h√†ng
    setTimeout(() => {
      cartBody.innerHTML = '';
      updateTotal();
    }, 1000);
  });

  updateTotal();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
